$("document").ready(function(){var e=!1,t=new Set,l=0,a=0,s=0,h=null,v=null,b=null,y=null,p=null,k=function(){e=!1;nt();var n=$("<div><\/div>").addClass("card-body").append($("<h3><\/h3>").addClass("card-title text-success text-center").text("You win!")).append($("<p><\/p>").addClass("card-text text-center").text(`Score: ${rt(l,s,v-h)}`)).append($("<button><\/button>").addClass("btn btn-dark").attr("type","button").attr("data-toggle","modal").attr("data-target","#difficultySelect").text("Play Again")),t=$("<div><\/div>").addClass("card").append(n);$("#win-alert").append(t)},d=function(){s++;y.text(s)},g=function(){h=Date.now();clearInterval(b);interval=setInterval(tt,1)},nt=function(){clearInterval(interval);v=Date.now()},tt=function(){p.text(it(h))},it=function(n){var f=Date.now(),t=f-n,e=Math.floor(t/36e5),i,r,u;return t%=36e5,i=Math.floor(t/6e4),t%=6e4,r=Math.floor(t/1e3),t%=1e3,u=t,`${o(e,2)}:${o(i,2)}:${o(r,2)}:${o(u,3)}`},o=function(n,t){var r=n.toString(),u=t-r.length;if(u>0)for(i=0;i<u;i++)r="0"+r;return r},rt=function(n,t,i){return Math.floor(100*Math.pow(n,2)*a/(i/1e3*t))},ut=function(){return Math.random()>=.5},n=function(n,t,i){return n*t+i},ft=function(i,r,u,f){var e=$("<div><\/div>").addClass(`tile tile-${i}`).attr("id",`tile-${n(i,r,u)}`).attr("tile-r",r).attr("tile-c",u);return f?(e.addClass("bg-dark"),t.add(e.attr("id"))):e.addClass("bg-light"),e},et=function(n,i){i?(n.removeClass("bg-dark"),n.addClass("bg-light"),t.delete(n.attr("id"))):(n.removeClass("bg-light"),n.addClass("bg-dark"),t.add(n.attr("id")))},u=function(n){et(n,n.hasClass("bg-dark"))},ot=function(t,r,f){if(e){for(i=0;i<f;i++)u($(`#tile-${n(t,r,i)}`));for(i=f+1;i<t;i++)u($(`#tile-${n(t,r,i)}`));for(j=0;j<r;j++)u($(`#tile-${n(t,j,f)}`));for(j=r+1;j<t;j++)u($(`#tile-${n(t,j,f)}`));u($(`#tile-${n(t,r,f)}`));d()}},w=function(i){var s=[],h=$("#tile-grid-body"),u,f,o,l;for(h.empty(),r=0;r<i;r++){for(u=$("<tr><\/tr>"),c=0;c<i;c++)f=ut(),s.push([n(i,r,c),f?1:0]),o=ft(i,r,c,f),l=$("<td><\/td>").append(o),o.click(function(){ot(i,parseInt(this.getAttribute("tile-r")),parseInt(this.getAttribute("tile-c")));e&&t.size==0&&k()}),u.append(l);h.append(u)}t.size==0&&(console.log("empty grid, regenerating..."),w(i));e=!0;a=st(i,s)},f=function(n,t){w(n);l=n;y=$("#game-moves").text(0);$("#game-size").addClass(`badge-${t}`).text(`${n}Ã—${n}`);p=$("#game-timer");g()},st=function(t,i){for(var u=[],f=[],e,r=0;r<t;r++)u[r]=0,f[r]=0;for(_r=0;_r<t;_r++)for(_c=0;_c<t;_c++)i[n(t,_r,_c)][1]==1&&(u[_r]++,f[_c]++);for(e=0,_r=0;_r<t;_r++)for(_c=0;_c<t;_c++)r=u[_r]+f[_c]+i[n(t,_r,_c)][1],r%2==1&&e++;return e};$("#difficulty-2x2").click(function(){f(2,"success")});$("#difficulty-4x4").click(function(){f(4,"info")});$("#difficulty-6x6").click(function(){f(6,"primary")});$("#difficulty-8x8").click(function(){f(8,"warning")});$("#difficulty-10x10").click(function(){f(10,"danger")});$("#difficultySelect").modal("show")});