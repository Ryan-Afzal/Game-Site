$("document").ready(function(){var e=!1,t=new Set,y=0,l=0,o=0,a=null,v=null,s=null,p=null,d=$("#game-timer"),w=$("#tile-grid"),g=$("#tile-grid-col"),nt=function(){e=!1;b();var n=$("<div><\/div>").addClass("card-body text-center").append($("<h3><\/h3>").addClass("card-title text-success text-center").text("You win!")).append($("<p><\/p>").addClass("card-text text-center").text(`Score: ${ft(y,o,v-a)}`)),t=$("<div><\/div>").addClass("card").append(n);$("#win-alert").append(t);$("#restart-button").toggleClass("btn-danger",!1).toggleClass("btn-success",!0)},tt=function(){o++;p.text(o)},it=function(){a=Date.now();clearInterval(s);s=setInterval(rt,1)},b=function(){clearInterval(s);v=Date.now()},rt=function(){d.text(ut(a))},ut=function(n){var f=Date.now(),t=f-n,e=Math.floor(t/36e5),i,r,u;return t%=36e5,i=Math.floor(t/6e4),t%=6e4,r=Math.floor(t/1e3),t%=1e3,u=t,`${h(e,2)}:${h(i,2)}:${h(r,2)}:${h(u,3)}`},h=function(n,t){var r=n.toString(),u=t-r.length;if(u>0)for(i=0;i<u;i++)r="0"+r;return r},ft=function(n,t,i){var r=l*1500;return Math.floor(100*Math.pow(n,2)*l*r/(t*i))},et=function(){return Math.random()>=.5},n=function(n,t,i){return n*t+i},ot=function(i,r,u,f){var s=g.width(),h=w.attr("cellspacing"),c=w.attr("cellpadding"),o=(s-c*2*i-h*(i-1))/i,e=$("<div><\/div>").addClass(`tile`).attr("id",`tile-${n(i,r,u)}`).attr("style",`width: ${o}px; height: ${o}px;`).attr("tile-r",r).attr("tile-c",u);return f?(e.addClass("bg-dark"),t.add(e.attr("id"))):e.addClass("bg-light"),e},st=function(n,i){i?(n.removeClass("bg-dark"),n.addClass("bg-light"),t.delete(n.attr("id"))):(n.removeClass("bg-light"),n.addClass("bg-dark"),t.add(n.attr("id")))},u=function(n){st(n,n.hasClass("bg-dark"))},ht=function(t,r,f){if(e){for(i=0;i<f;i++)u($(`#tile-${n(t,r,i)}`));for(i=f+1;i<t;i++)u($(`#tile-${n(t,r,i)}`));for(j=0;j<r;j++)u($(`#tile-${n(t,j,f)}`));for(j=r+1;j<t;j++)u($(`#tile-${n(t,j,f)}`));u($(`#tile-${n(t,r,f)}`));tt()}},k=function(i){var u,f,o,s,h,a;for(t=new Set,u=[],f=$("#tile-grid-body"),f.empty(),r=0;r<i;r++){for(o=$("<tr><\/tr>"),c=0;c<i;c++)s=et(),u.push([n(i,r,c),s?1:0]),h=ot(i,r,c,s),a=$("<td><\/td>").append(h),h.click(function(){ht(i,parseInt(this.getAttribute("tile-r")),parseInt(this.getAttribute("tile-c")));e&&t.size==0&&nt()}),o.append(a);f.append(o)}t.size==0&&(console.log("empty grid, regenerating..."),k(i));e=!0;l=ct(i,u)},f=function(n,t){b();v=null;s=null;$("#win-alert").empty();$("#restart-button").toggleClass("btn-danger",!0).toggleClass("btn-success",!1);k(n);y=n;o=0;p=$("#game-moves").text(0);$("#game-size").removeClass().addClass(`badge text-light badge-${t}`).text(`${n}Ã—${n}`);it()},ct=function(t,i){for(var s,r,u,e=[],o=[],f=0;f<t;f++)e[f]=0,o[f]=0;for(r=0;r<t;r++)for(u=0;u<t;u++)i[n(t,r,u)][1]==1&&(e[r]++,o[u]++);for(s=0,r=0;r<t;r++)for(u=0;u<t;u++)f=e[r]+o[u]+i[n(t,r,u)][1],f%2==1&&s++;return s};$("#difficulty-2x2").click(function(){f(2,"success")});$("#difficulty-4x4").click(function(){f(4,"info")});$("#difficulty-6x6").click(function(){f(6,"primary")});$("#difficulty-8x8").click(function(){f(8,"warning")});$("#difficulty-10x10").click(function(){f(10,"danger")});$("#difficultySelect").modal("show")});