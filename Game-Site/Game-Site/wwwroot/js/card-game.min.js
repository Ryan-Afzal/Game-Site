"use strict;";class BipGraph{constructor(n,t){this.m=n;this.n=t;this.adj=[];for(var i=0;i<=n;i++)this.adj.push([])}AddEdge(n,t){this.adj[n].includes(t)||this.adj[n].push(t)}ClearVertex(n){this.adj[n]=[]}ClearEdge(n,t){this.adj[n].includes(t)&&this.adj[n].splice(this.adj[n].indexOf(t),1)}hasEdge(n,t){return this.adj[n].includes(t)}HopcroftKarp(){var i,u,t,r,n;for(this.pairU=new Array(this.m+1),this.pairV=new Array(this.n+1),this.dist=new Array(this.m+1),n=0;n<this.m+1;n++)this.pairU[n]=0;for(i=0;i<this.n+1;i++)this.pairV[i]=0;for(u=0;this.HasAugmentingPath();){for(t=Array(),r=1;r<=this.m;r++)t.push(r);for(this.Shuffle(t),n=0;n<this.m;n++)this.pairU[t[n]]==0&&this.dfs(t[n])&&u++}return this.pairU}HasAugmentingPath(){for(var i,t=[],n=1;n<=this.m;n++)this.pairU[n]==0?(this.dist[n]=0,t.push(n)):this.dist[n]=Number.MAX_VALUE;for(this.dist[0]=Number.MAX_VALUE;t.length!=0;)if(n=t.shift(),this.dist[n]<this.dist[0])for(i of this.adj[n])this.dist[this.pairV[i]]==Number.MAX_VALUE&&(this.dist[this.pairV[i]]=this.dist[n]+1,t.push(this.pairV[i]));return this.dist[0]!==Number.MAX_VALUE}dfs(n){if(n!=0){this.Shuffle(this.adj[n]);for(var t of this.adj[n])if(this.dist[this.pairV[t]]==this.dist[n]+1&&this.dfs(this.pairV[t]))return this.pairV[t]=n,this.pairU[n]=t,!0;return this.dist[n]=Number.MAX_VALUE,!1}return!0}Shuffle(n){for(var t=n.length,i,r;t>1;)t--,i=Math.floor(Math.random()*(t+1)),r=n[i],n[i]=n[t],n[t]=r}toString(){for(var t="",n=0;n<=this.m;n++)t+=n+": "+this.adj[n].toString()+"\n";return t}}$("document").ready(function(){var it=$("#settingsModal"),rt=$("#settingsModalOk"),r=$("#turn-over-button"),o,n,u,t,f,i,s=function(){var r,s;for(o=[],n=[],u=!1,t=18,f=3,i=new BipGraph(t,t),r=1;r<=t;r++)for(s=1;s<=t;s++)i.AddEdge(r,s);$("#win-alert").empty();$("#restart-button").toggleClass("btn-danger",!0).toggleClass("btn-success",!1);e();a()},a=function(){var l=$("#card-grid-col"),e=$("#card-grid"),s=$("#card-grid-body"),r,u,f,t;s.empty();var h=3,n=6,i=l.width(),a=e.attr("cellspacing"),p=e.attr("cellpadding"),i=(i-p*2*n-a*(n-1))/n,w=i*3/2,b=[...Array(h*n).keys()],c=0;for(r=0;r<h;r++){for(u=$("<tr><\/tr>"),f=0;f<n;f++)t=v(b[c],i,w),t.click(function(){y($(this))}),o.push(t),u.append($("<td><\/td>").append(t)),c++;s.append(u)}},v=function(n,t,i){return $("<div><\/div>").attr("id",`${n}`).attr("card-num",-36).addClass("game-card game-card-active bg-dark").attr("style",`width: ${t}px; height: ${i}px;`).append($("<h2><\/h2>").addClass("game-card-text text-light").text("?"))},y=function(t){u||(n.indexOf(t.attr("id"))==-1?n.length<f&&p(t):h(t))},p=function(t){n.push(t.attr("id"));t.toggleClass("bg-dark",!1);t.toggleClass("bg-primary",!0);n.length==f&&nt()},h=function(t){var i=n.indexOf(t.attr("id"));n.splice(i,1);t.toggleClass("bg-dark",!0);t.toggleClass("bg-primary",!1);n.length<f&&e()},w=function(){while(n.length>0)h($(`#${n[0]}`))},b=function(){var a,o,v,s,e,y,p,w,f,h,r,l;for(u=!0,a=new BipGraph(t,t/2),r=0;r<n.length;r++){f=parseInt(n[r]);for(e of i.adj[f+1])a.AddEdge(f+1,(e-1)%(t/2)+1)}for(o=a.HopcroftKarp(),v=!0,r=0;r<n.length;r++)if(f=parseInt(n[r]),o[f+1]==0){v=!1;break}if(v){for(s=new Set,r=0;r<n.length;r++)f=parseInt(n[r]),i.hasEdge(f+1,o[f+1])?s.add(o[f+1]):s.add(o[f+1]+t/2),h=f.toString(),$(`#${h}`).attr("card-num",o[f+1].toString());for(r=0;r<n.length;r++){f=parseInt(n[r]);i.ClearVertex(f+1);for(e of s)i.AddEdge(f+1,e)}for(r=0;r<t;r++)if(!k(r))for(e of s)i.ClearEdge(r+1,e);for(r=0;r<n.length;r++)l=$(`#${n[r]}`),c(l);return}for(y=new BipGraph(t,t),r=0;r<n.length;r++){f=parseInt(n[r]);for(p of i.adj[f+1])y.AddEdge(f+1,p)}for(w=y.HopcroftKarp(),r=0;r<n.length;r++)f=parseInt(n[r]),h=f.toString(),$(`#${h}`).attr("card-num",(w[f+1]-1)%(t/2)+1);for(r=0;r<n.length;r++)l=$(`#${n[r]}`),c(l);tt()},k=function(t){for(var i of n)if(parseInt(i)==t)return!0;return!1},c=function(n){n.children(".game-card-text").text(n.attr("card-num"))},d=function(){var t,i;for(u=!1,t=0;t<n.length;t++)i=$(`#${n[t]}`),g(i);w();e()},g=function(n){n.children(".game-card-text").text("?")},ut=function(n){n.toggleClass("bg-dark",!1);n.toggleClass("bg-primary",!1);n.toggleClass("bg-warning",!0);n.toggleClass("game-card-active",!1);n.toggleClass("game-card-win",!0)},nt=function(){r.toggleClass("disabled",!1);r.removeAttr("disabled");r.click(l)},e=function(){r.toggleClass("disabled",!0);r.attr("disabled","disabled");r.off("click")},l=function(){u?d():b()},tt=function(){var n=$("<div><\/div>").addClass("card-body text-center").append($("<h3><\/h3>").addClass("card-title text-success text-center").text("You win!")),t=$("<div><\/div>").addClass("card").append(n);$("#win-alert").append(t);e();$("#restart-button").toggleClass("btn-danger",!1).toggleClass("btn-success",!0)};$("#restart-button").click(function(){s()});r.click(l);s();$("#instructionsModal").modal("show")});