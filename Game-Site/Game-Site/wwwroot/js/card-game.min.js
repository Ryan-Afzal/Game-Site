"use strict;";class BipGraph{constructor(n,t){this.m=n;this.n=t;this.adj=[];for(var i=0;i<=n;i++)this.adj.push([])}AddEdge(n,t){this.adj[n].includes(t)||this.adj[n].push(t)}ClearVertex(n){this.adj[n]=[]}ClearEdge(n,t){this.adj[n].includes(t)&&this.adj[n].splice(this.adj[n].indexOf(t),1)}hasEdge(n,t){return this.adj[n].includes(t)}HopcroftKarp(){var i,u,t,r,n;for(this.pairU=new Array(this.m+1),this.pairV=new Array(this.n+1),this.dist=new Array(this.m+1),n=0;n<this.m+1;n++)this.pairU[n]=0;for(i=0;i<this.n+1;i++)this.pairV[i]=0;for(u=0;this.HasAugmentingPath();){for(t=Array(),r=1;r<=this.m;r++)t.push(r);for(this.Shuffle(t),n=0;n<this.m;n++)this.pairU[t[n]]==0&&this.dfs(t[n])&&u++}return this.pairU}HasAugmentingPath(){for(var t,i=[],n=1;n<=this.m;n++)this.pairU[n]==0?(this.dist[n]=0,i.push(n)):this.dist[n]=Number.MAX_VALUE;for(this.dist[0]=Number.MAX_VALUE;i.length!=0;)if(n=i.shift(),this.dist[n]<this.dist[0])for(t=0;t<this.adj[n].length;t++)this.dist[this.pairV[this.adj[t]]]==Number.MAX_VALUE&&(this.dist[this.pairV[this.adj[t]]]=this.dist[n]+1,i.push(this.pairV[this.adj[t]]));return this.dist[0]!==Number.MAX_VALUE}dfs(n){if(n!=0){this.Shuffle(this.adj[n]);for(var t=0;t<this.adj[n].length;t++)if(this.dist[this.pairV[this.adj[t]]]==this.dist[n]+1&&this.dfs(this.pairV[this.adj[t]]))return this.pairV[this.adj[t]]=n,this.pairU[n]=this.adj[t],!0;return this.dist[n]=Number.MAX_VALUE,!1}return!0}Shuffle(n){for(var t=n.length,i,r;t>1;)t--,i=Math.floor(Math.random()*(t+1)),r=n[i],n[i]=n[t],n[t]=r}}$("document").ready(function(){var nt=$("#settingsModal"),tt=$("#settingsModalOk"),r=$("#turn-over-button"),o,n,u,t,f,i,s=function(){var r,s;for(o=[],n=[],u=!1,t=18,f=3,i=new BipGraph(t,t),r=1;r<=t;r++)for(s=1;s<=t;s++)i.AddEdge(r,s);$("#win-alert").empty();$("#restart-button").toggleClass("btn-danger",!0).toggleClass("btn-success",!1);e();l()},l=function(){var l=$("#card-grid-col"),e=$("#card-grid"),s=$("#card-grid-body"),r,u,f,t;s.empty();var h=3,n=6,i=l.width(),y=e.attr("cellspacing"),p=e.attr("cellpadding"),i=(i-p*2*n-y*(n-1))/n,w=i*3/2,b=[...Array(h*n).keys()],c=0;for(r=0;r<h;r++){for(u=$("<tr><\/tr>"),f=0;f<n;f++)t=a(b[c],i,w),t.click(function(){v($(this))}),o.push(t),u.append($("<td><\/td>").append(t)),c++;s.append(u)}},a=function(n,t,i){return $("<div><\/div>").attr("id",`card-${n}`).attr("card-num",-1).addClass("game-card game-card-active bg-dark").attr("style",`width: ${t}px; height: ${i}px;`).append($("<h2><\/h2>").addClass("game-card-text text-light").text("?"))},v=function(t){u||(n.indexOf(t.attr("id"))==-1?n.length<f&&y(t):h(t))},y=function(t){n.push(t.attr("id"));t.toggleClass("bg-dark",!1);t.toggleClass("bg-primary",!0);n.length==f&&d()},h=function(t){var i=n.indexOf(t.attr("id"));n.splice(i,1);t.toggleClass("bg-dark",!0);t.toggleClass("bg-primary",!1);n.length<f&&e()},p=function(){while(n.length>0)h($(`#${n[0]}`))},w=function(){for(var e,s,o,f,h,l,a,u,c=new BipGraph(t,t/2),r=0;r<n.length;r++){u=n[r];for(f in i.adj[u+1])c.AddEdge(u+1,(f-1)%(t/2)+1)}for(e=c.HopcroftKarp(),s=!0,r=0;r<n.length;r++)if(u=n[r],e[u+1]==0){s=!1;break}if(s){for(o=new Set,r=0;r<n.length;r++)u=n[r],i.hasEdge(u+1,e[u+1])?o.add(e[u+1]):o.add(e[u+1]+t/2),$(`#${u}`).attr("card-num")=e[u+1].ToString();for(r=0;r<n.length;r++){u=n[r];i.ClearVertex(r+1);for(f of o)i.AddEdge(r+1,f)}for(r=0;r<t;r++)if(!n.includes(r))for(f of o)i.ClearEdge(r+1,f);return}for(h=new BipGraph(t,t),r=0;r<n.length;r++){u=n[r];for(l of i.adj[u+1])h.AddEdge(u+1,l)}for(a=h.HopcroftKarp(),r=0;r<n.length;r++)u=n[r],$(`#${u}`).attr("card-num")=(a[u+1]-1)%(t/2)+1;g()},it=function(n){n.children(".game-card-text").text(n.attr("card-num"))},b=function(){var t,i;for(u=!1,t=0;t<n.length;t++)i=$(`#${n[t]}`),k(i);p();e()},rt=function(n,t){var i=n.parent(),r=i.children().index(n);n.insertAfter(t);r==0?t.insertBefore(i.children().get(0)):t.insertAfter(i.children().get(r-1))},k=function(n){n.children(".game-card-text").text("?")},ut=function(n){n.toggleClass("bg-dark",!1);n.toggleClass("bg-primary",!1);n.toggleClass("bg-warning",!0);n.toggleClass("game-card-active",!1);n.toggleClass("game-card-win",!0)},d=function(){r.toggleClass("disabled",!1);r.removeAttr("disabled");r.click(c)},e=function(){r.toggleClass("disabled",!0);r.attr("disabled","disabled");r.off("click")},c=function(){u?b():w()},g=function(){var n=$("<div><\/div>").addClass("card-body text-center").append($("<h3><\/h3>").addClass("card-title text-success text-center").text("You win!")),t=$("<div><\/div>").addClass("card").append(n);$("#win-alert").append(t);e();$("#restart-button").toggleClass("btn-danger",!1).toggleClass("btn-success",!0)};$("#restart-button").click(function(){s()});r.click(c);s()});