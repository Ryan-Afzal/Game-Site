"use strict";function printMessage(n,t){var i=$("#console-output");i.append($("<div />").addClass("output-text-container").append($("<div />").addClass("output-text-head").html(n)).append($("<div />").addClass("output-text").html(t)));$("#console-output-container").scrollTop(i[0].scrollHeight)}$(function(){printMessage("","Welcome to the Linear Algebra program. ");printMessage("","Conventions: ");printMessage("","1. An M x N matrix contains M rows and N columns.");printMessage("","2. All indices are 1-based, meaning they start from 1 and count upwards");printMessage("","");printMessage("",'Enter the dimensions of the matrix (in the form "M N"): ');var n=0,r,t,i;$("#console-input").keydown(function(u){var c=u.keyCode?u.keyCode:u.which,s,f,e,o,h;if(c==13&&!u.shiftKey&&(s=document.getElementById("console-input"),f=s.textContent,f.trim()!="")){if(s.textContent="",printMessage(">> ",f),n==0)e=f.split(" "),t=parseInt(e[0]),i=parseInt(e[1]),r=new Matrix(t,i),printMessage("","Matrix has dimensions "+t+" x "+i+". "),printMessage("","You will now the entries of the matrix, separated by a single space. ");else if(n<=t)for(e=f.split(" "),o=0;o<i;o++)h=parseInt(e[o],10),r.setValue(h,n-1,o);n<t?printMessage("","Enter the entries of row #"+(n+1)+": "):n==t&&(printMessage("","The matrix you entered is below:"),printMessage("",r));u.preventDefault();n++}})});var Numbers=function(){function n(){}return n.abs=function(n){return n>0?n:-n},n.gcd=function(n,t){var i=this.abs(n),r=this.abs(t);return i==r&&i==0?0:i==0?r:r==0?i:i>r?this.gcd(i%r,r):this.gcd(i,r%i)},n.gcdArr=function(n){for(var u,t=this.abs(n[0]),i=0,r=n;i<r.length;i++)u=r[i],t=this.gcd(t,u);return t},n.prototype.isInRange=function(n,t,i){return n<=i&&n>=t?!0:!1},n.min=function(n,t){return n<t?n:t},n}(),Fraction=function(){function n(n,t){if(this.N=n,this.D=t,t==0)try{throw new Error("Denominator cannot be 0.");}catch(i){console.log(i)}}return n.prototype.multiply=function(n){this.N*=n},n.prototype.multiplyFraction=function(n){this.N*=n.N;this.D*=n.D},n.prototype.divide=function(n){if(n==0)try{throw new Error("Cannot divide by 0.");}catch(t){console.log(t)}this.D*=n},n.prototype.simplify=function(){var n=Numbers.gcd(this.N,this.D);this.N/=n;this.D/=n;this.D<0&&(this.N*=-1,this.D*=-1)},n.prototype.toString=function(){return this.simplify(),this.D==1?this.N+"":this.N+"/"+this.D},n}(),Matrix=function(){function n(n,t){var i;for(this.M=n,this.N=t,this.vals=new Array(n),i=0;i<n;i++)this.vals[i]=new Array(t);for(this.pivots=new Array(n),i=0;i<n;i++)this.pivots[i]=t}return n.prototype.setValue=function(n,t,i){var u,r;for(this.vals[t][i]=n,u=!1,r=0;r<this.N;r++)this.vals[t][r]==0||u||(u=!0,this.pivots[t]=r);u||(this.pivots[t]=this.N)},n.prototype.toString=function(){for(var t,n="",i=0;i<this.M;i++){for(t=0;t<this.N;t++)n+=this.vals[i][t],n+="\t";n+="<br />"}return n},n.prototype.swap=function(n,t,i){for(var u,r=0;r<this.N;r++)u=this.vals[n][r],this.vals[n][r]=this.vals[t][r],this.vals[t][r]=u;return u=this.pivots[n],this.pivots[n]=this.pivots[t],this.pivots[t]=u,i?"R_"+(n+1)+" <-> R_"+(t+1):""},n.prototype.scale=function(n,t){for(var i=0;i<this.N;i++)this.vals[n][i]*=t;return t==0&&(this.pivots[n]=this.N),t},n.prototype.addRow=function(n,t){for(var r,i=0;i<this.N;i++)this.vals[t][i]+=this.vals[n][i];for(r=!1,i=0;i<this.N;i++)this.vals[t][i]=this.vals[t][i],this.vals[t][i]==0||r||(r=!0,this.pivots[t]=i);r||(this.pivots[t]=this.N)},n.prototype.descale=function(n){var i=Numbers.gcdArr(this.vals[n]),r=i,t;if(i!=0){for(t=0;t<this.N;t++)this.vals[n][t]/=i;if(this.vals[n][this.pivots[n]]<0)for(r*=-1,t=0;t<this.N;t++)this.vals[n][t]*=-1}else r=1;return r},n.prototype.cancel=function(n,t,i){var r,u,e="",f=new Fraction(1,1),h,a,c,v,o,s,l,y,p;return this.pivots[n]>this.pivots[t]||this.pivots[n]==this.pivots[t]&&n<t?(r=n,u=t):(r=t,u=n),h=this.descale(r),h!=1&&(a=new Fraction(1,h),f.multiply(h),i&&(e+="R_"+(r+1)+" -> ("+a+") * R_"+(r+1)+"<br />",e+=this.toString()+"<br />")),c=this.descale(u),c!=1&&(v=new Fraction(1,c),f.multiply(c),i&&(e+="R_"+(u+1)+" -> ("+v+") * R_"+(u+1)+"<br />",e+=this.toString()+"<br />")),o=1,s=1,o*=this.vals[u][this.pivots[r]],s*=-this.vals[r][this.pivots[r]],this.scale(r,o),this.scale(u,s),f.divide(o),f.divide(s),this.addRow(r,u),f.multiply(this.descale(r)),l=this.descale(u),f.multiply(l),y=new Fraction(o,l),p=new Fraction(s,l),i&&(e+="R_"+(u+1)+" -> ("+p+") * R_"+(u+1)+" + ("+y+") * R_"+(r+1)),f.simplify(),[f,e]},n.prototype.toREF=function(n){for(var f,o,s,t,h,r="",u=new Fraction(1,1),e=[],i=0;i<this.M;i++){for(f=Number.MAX_VALUE,o=-1,e=[],s=0,t=i;t<this.M;t++)this.pivots[t]<f?(f=this.pivots[t],e=[],s=0,o=t):this.pivots[t]==f&&(e.push(t),s++);if(f<this.N)for(o!=i&&(this.swap(i,o,n),u.multiply(-1),n&&(r+="<br />",r+=this.toString()+"<br />")),t=0;t<s;t++)h=this.cancel(i,e[t],n),u.multiplyFraction(h[0]),n&&(r+=h[1],r+="<br />",r+=this.toString()+"<br />"),u.simplify()}for(i=0;i<Numbers.min(this.M,this.N);i++)u.multiply(this.vals[i][i]);return u.simplify(),[u,r]},n.prototype.toRREF=function(n){var r="",t,i;for(this.toREF(n),t=this.M-1;t>=0;t--)if(this.pivots[t]<this.N)for(i=0;i<t;i++)this.vals[i][this.pivots[t]]!=0&&(this.cancel(t,i,n),n&&(r+="<br />",r+=this.toString()+"<br />"));return r},n.prototype.copy=function(){for(var t,r=new n(this.M,this.N),i=0;i<this.M;i++)for(t=0;t<this.N;t++)r.setValue(this.vals[i][t],i,t);return r},n}();